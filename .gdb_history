set disassembly-flavor intel 
target remote | qemu-system-i386 -S -gdb stdio -m 32 -fda build/main_floppy.img
break *0x7c00
c
next
next
x/i $ip
x/i $eip
x/10i $eip
r
exit
exit
next
exit
exit
exit
exit
exit
exit
next
exit
disassemble main
break *main
c
r
disassemble 0x11a9
disassemble *0x11a9
break *0x11a9
c
break readSectors
c
r
delete breakpoints 
break readSectors
c
r
break  main
r ./build/main_floppy.img FILE
c
next
exit
break main
r build/main_floppy.img FILE
disassemble main
break *0x00005555555552f3
c
disassemble readSectors
x/w 0x00005555555552f3
x/w g_BootSector
x/w *g_BootSector
x/w *0x00005555555552f3
x/w 0x00005555555552f3
x/10w 0x00005555555552f3
disassemble main
break *0x00000000000014c7
c
r build/main_floppy.img "TEXT    TXT"
break *main
break mian
break main
r
exit
break *main
r
r build/main_floppy.img KERNEL
disassemble main
break *0x00005555555554c7
c
x/b 0x00005555555554c7
x/s 0x00005555555554c7
x/10s 0x00005555555554c7
x/10w 0x00005555555554c7
disassemble main
break *0x0000000000001850
r build/main_floppy.img "TEXT    TXT"
break *main
r build/main_floppy.img "TEXT    TXT"
delete breakpoint 1
r build/main_floppy.img "TEXT    TXT"
disassemble main
break *readFAT
c
si
x/b $ax
x/b $eax
x/d $eax
p $eax
ni
x/18b 0x0000000000001850
x/18b *0x0000000000001850
x/18w *0x0000000000001850
x/w *0x0000000000001850
ni
x/w *0x0000000000001850
ni
si
next
x/b 0x5555555580a8
x/d 0x5555555580a8
x/w 0x5555555580a8
x/18b 0x5555555580a8
x/2tb 0x5555555580a8
x/18tb 0x5555555580a8
x/182tb 0x5555555580a8
ni
next
exit
next
x/10i $esp
x/30i $esp
ni
break *0x7c9d
c
ni
ni
break *0x7c7a
c
exit
c
next
exit
next
c
+
next
break *0x7c56
next
break *0x7c9b
c
next
break *0x7c9b
c
ni
c
next
exit
disassemble _start
next
break *0x7c53
c
exit
next
exit
next
break *0x7cba
c
exit
